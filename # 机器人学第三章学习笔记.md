# 机器人学第三章学习笔记

## 轨迹
### 平滑一维轨迹
要表示一维连续轨迹通常用五次多项式，至于为什么用五次多项式，有以下几点原因：
1. 要是位姿流畅的变化，就要使轨迹光滑，一位轨迹中五次多项式，可以表示轨迹，速度，加速度，光滑的变化。
2. 重要的六个边界条件--初末的位置，速度，加速度。要全部确定下来至少要5次方程.
**问题**:如果只是单纯的五次多项式,机器人大部分时间都处于较低速度，效率较低平均速度知识最大速度的52%。
***因此***：
采用混和轨迹，使机械臂长时间处于最大速度上，可以提高其平均速度。
### 平滑多维轨迹
位姿分为位置和姿态。
#### 多段轨迹
由于现实需要,机器人经过节点时需要转向和变速,变速过快会使机器受损,因此在直线轨迹上汇接一段多项式曲线,使其平滑过渡.
对应多轴情况,拿两个机械臂举例,两个机械臂的轴运动最大速度不同,运动时间不同,通过确定最慢的轴,调整两轴曲线,实现两轴同时转向.
可用mstraj函数实现.
### 三维空间姿态插值
线性插值:通过向量运算法则使v(t)=v1+t*(v2-v1),通过初末向量描绘中间轨迹.
众所周知,位姿的表示方法有三种:
1. 正交旋转矩阵,线性插值后一般不会得到有效的旋转矩阵.
2. 三角度法,线性插值后可以生成轨迹,但欧拉角的通病是奇异解,会是轨迹出现问题.
3. 四元数(最好方法):
    #### 一般球面插值法
    $vv(t)=k(t)*(v1+t*(v2-v1))$
    其中$k(t)=|v1|/|v(t)|$
    由于其角度不随时间线性变化,由上文可知,四元数可看作绕任意向量的旋转.
    #### 球面线性插值
    公式:
    $r=a(t)p+b(t)q$
    $a(t)=sin[(1-t)\theta]/sin\theta$
    $b(t)=sint\theta/sin\theta$
    分母相同,分子相似,理论上因有很巧妙的数学应用.
    用interp函数实现.
### 笛卡尔运动
将位置和姿态变换结合一起
```matlab
p=transl(Ts);//位置平移
rpy=tr2rpy(Ts);//姿态变化
```
通过trinterp进行线性和球面线性插值.
这样曲线虽然是平滑的,但位置变化是没有加速和减速过程,可用tpoly和lspb函数构建一个平滑高效的曲线.
## 时变坐标系
同上一章思想,将每个物体的运动看成其坐标系的运动.
### 旋转坐标系
旋转矩阵微分表达式略
s(t)是一个由角速度构成的对称矩阵
可用skew和vex函数实现求旋转矩阵和逆解.
有微分近似法可看出,标准正交旋转矩阵可以看作一个以角速度为变量的函数.
### 增量运动
值得注意的是,在无穷小的角度变换中乘法是可逆的.
两个无穷小的位姿可用一个六维向量来表示他们的差异.
可用tr2delta和delta2tr进行求增量矩阵求解和逆运算.
### 惯性导航系统
在实际运用中,运用传感器将每一步位姿改变和初始位姿记录下来.
1. 正交旋转矩阵法
   算出旋转矩阵后,将其正交化,单位化.由于被加项很小,可以对其进行矫正,强化正交矩阵中元素限制.
   可由T=trnorm(T)进行实现.
2. 理由同上单位化可由qd=q.dot(omega)实现.
### 二维向量旋转矩阵
```matlab
function y=zrot2(a)
y=[cos(a) -sin(a);sin(a) cos(a)];
```
# 算法导论
### 插入排序
```C++
#include<iostream>
using namespace std;

int main()
{
	int a[10] = { 2,7,0,4,1,5,6,8,3,9 };
	for (int i = 1; i < sizeof(a)/sizeof(int); i++)
	{
		int b = a[i];
		int j = i - 1;
		while ((j+1) && a[j] > b)
		{
			a[j+1] = a[j];
			j--;
		}
		a[j+1] = b;
	}
	for (int i = 0; i < sizeof(a) / sizeof(int); i++)
	{
		cout << a[i] << endl;
	}
	return 0;
}
```
